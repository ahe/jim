<h2 class="project_name">Sammy</h2>
<h2>Documentation</h2>
<h3>Events</h3>
<p>Inside of a Sammy application javascript events can be defined, bound, and triggered. The methods for doing this purposely look identical to the jQuery Event <span class="caps">API</span>. Though they look the same, there function is slightly different.</p>
<h4>Bind</h4>
<p>Custom events can be bound within the application definintion block with the <code>bind()</code> method.</p>
<div class="highlight"><pre><span class="c">// bind(name, callback)</span><br />
<span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;db-loaded&#39;</span><span class="o">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="o">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span><br />
  <span class="k">this</span><span class="p">.</span><span class="nx">redirect</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="p">);</span><br />
<span class="p">});</span><br />
</pre></div>
<p>Internally, Sammy binds the events to the application element within a unique application namespace. This means that if you have two Sammy applications running in the same document, you can trigger and bind events without worrying about double trigger issues. Events are also automatically bound and unbound to the <span class="caps">DOM</span> on <code>run()</code> and <code>unload()</code>.</p>
<p>Inside of the callback, <code>this</code> is a Sammy.EventContext just like it is for <a href="routes.html">routes.</a> This means you can <code>redirect</code>, <code>partial</code>, etc.</p>
<h4>Trigger</h4>
<p>The other side of events is <code>trigger()</code> which trigger&#8217;s the custom events you&#8217;ve defined. <code>trigger()</code> works within both the context of the app and other events/routes.</p>
<p>These triggers are equivelent:</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">sammy</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />
  <br />
  <span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="o">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />
    <span class="c">// trigger on EventContext</span><br />
    <span class="k">this</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;other-event&#39;</span><span class="p">);</span><br />
  <span class="p">});</span><br />
  <br />
<span class="p">});</span><br />
<span class="c">// trigger on the app itself</span><br />
<span class="nx">app</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;other-event&#39;</span><span class="p">);</span><br />
</pre></div>
<p>You can also pass a custom data object to trigger. These get passed to the bound callback as the second argument.</p>
<div class="highlight"><pre><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">sammy</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><br />
  <br />
  <span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="o">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="o">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span> <span class="kd">with</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">{</span><br />
    <span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">[</span><span class="s1">&#39;my_data&#39;</span><span class="p">]);</span><br />
  <span class="p">}});</span><br />
  <br />
  <span class="nx">get</span><span class="p">(</span><span class="s1">&#39;#/&#39;</span><span class="o">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="kd">with</span><span class="p">(</span><span class="k">this</span><span class="p">)</span> <span class="p">{</span><br />
    <span class="nx">trigger</span><span class="p">(</span><span class="s1">&#39;test&#39;</span><span class="o">,</span> <span class="p">{</span><span class="nx">my_data</span><span class="o">:</span> <span class="s1">&#39;<span class="caps">EVENTED</span>!&#39;</span><span class="p">});</span><br />
  <span class="p">}});</span><br />
  <br />
<span class="p">});</span><br />
</pre></div>
<p>With this example, taking our browser to <code>#/</code> would fire the event <code>'test'</code> passing and alerting our precious data.</p>
<h4>Pre-defined Events</h4>
<p>Sammy application has a number of predefined events that are fired throughout an app&#8217;s life cycle. Its often useful to bind/listen to these existing events in order to invoke functionality at paticular points.</p>
<p>The most common use case is listening to <code>run</code>. run is the first event fired in the apps lifecycle and can be useful for establishing a connection to a database, build out a list of documents, etc.</p>
<p>To see a list of all the pre-defined events, <a href="api.html">check the <span class="caps">API</span></a></p>